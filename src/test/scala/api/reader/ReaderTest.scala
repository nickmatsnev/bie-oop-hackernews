package api.reader

import api.objects.UpdatesObject
import org.scalatest.funsuite.AnyFunSuite

class ReaderTest extends AnyFunSuite{
  test("toStories"){
    val intArr: Array[Int] = Array(33153063,33151774,33152472,33151402,33151658,33151959,33151239,33152539,33123895,33150642,33150086,33150260,33150272,33152887,33149938,33151474,33150362,33134058,33127602,33147270,33152072,33152069,33148986,33123884,33149504,33152973,33147680,33150567,33153152,33147079,33149754,33122934,33122419,33122242,33151312,33150179,33149213,33148697,33147193,33151805,33152394,33149706,33147009,33152958,33153178,33150276,33151967,33151830,33153359,33150862,33140973,33145411,33149803,33152788,33145470,33149796,33138836,33143016,33149857,33130578,33131166,33152929,33146686,33123142,33145095,33130611,33143489,33151838,33130701,33145136,33152686,33152085,33143828,33150084,33146693,33152046,33147071,33146454,33149651,33138278,33131630,33144556,33152338,33145791,33138894,33150930,33145498,33142751,33140795,33116558,33140527,33150186,33149786,33129908,33117726,33143995,33148732,33151518,33135389,33151003,33130221,33141517,33150112,33141335,33134113,33127423,33148935,33148215,33142560,33142866,33124365,33145898,33138050,33138884,33138933,33130536,33132951,33140298,33152422,33150351,33150320,33144206,33150286,33150285,33145246,33146002,33149684,33140235,33138570,33149916,33151083,33119801,33124631,33136554,33139827,33144510,33153122,33138302,33146820,33134737,33136351,33139062,33146484,33143546,33148198,33125963,33150052,33139320,33130954,33135695,33148411,33129575,33136329,33120136,33150419,33129432,33149929,33133369,33149143,33132850,33135237,33122705,33150281,33139837,33139297,33140853,33123620,33127345,33138242,33146316,33123559,33150136,33139148,33128972,33124986,33147372,33108050,33142087,33146789,33128941,33138625,33140927,33149996,33149970,33127810,33079427,33122122,33146017,33144544,33145372,33149905,33128495,33141439,33140237,33151975,33144400,33149083,33136935,33144417,33134059,33117631,33124526,33134947,33093897,33125322,33131195,33137302,33123295,33123697,33140581,33098704,33147386,33149686,33133477,33136193,33124191,33150986,33129026,33124521,33122656,33124991,33105138,33137417,33149709,33117813,33137708,33114107,33123406,33131480,33145229,33146265,33117656,33137196,33149736,33139506,33139446,33146224,33137721,33144464,33109633,33149601,33101401,33146006,33132107,33127419,33107108,33117192,33125383,33134142,33082128,33126223,33143447,33132820,33105773,33139064,33143504,33119656,33135896,33130641,33107017,33149155,33124505,33112915,33077473,33125176,33130632,33142549,33120969,33105706,33144910,33138219,33123514,33133231,33124554,33109243,33132718,33140045,33096580,33118584,33119870,33115719,33138349,33151260,33150197,33118994,33147771,33148796,33107756,33053537,33094449,33141078,33132061,33136495,33120534,33148730,33106822,33149629,33116245,33134995,33131840,33106921,33147918,33137759,33144258,33148632,33107065,33119317,33117923,33125164,33117939,33123972,33127463,33126447,33126676,33091698,33118471,33147241,33123807,33106723,33128523,33084205,33139983,33142213,33078719,33078798,33130533,33142776,33127285,33091715,33139936,33129355,33134021,33065142,33143442,33116310,33121628,33144527,33104550,33123916,33127646,33104618,33067962,33134952,33152314,33074289,33134463,33131720,33094342,33101487,33114284,33131367,33130863,33129007,33147309,33141274,33133057,33141452,33145738,33092239,33147228,33141020,33116762,33134839,33137793,33140400,33140879,33144039,33114403,33147127,33119486,33082719,33124034,33146364,33062606,33085441,33115647,33106677,33045372,33122729,33131519,33049627,33120000,33120491,33117650,33083550,33085532,33146905,33115332,33091903,33136422,33109513,33078648,33136665,33095031,33146806,33113569,33134908,33085410,33148984,33145525,33146253,33136799,33109625,33139894,33087525,33103303,33147518,33114869,33128332,33089535,33117681,33043883,33071119,33113557,33123736,33071712,33094829,33147390,33118924,33110973,33133140,33130986,33096899,33145504,33129685,33117766,33135793,33124917,33123756,33109694,33086322,33137624,33135539,33104750,33148202,33147258,33110478,33113138,33141508,33123948,33097663,33141378,33078012,33061058,33052483,33147159,33139315,33134663,33128824,33142761,33092974,33049809,33116940,33136692,33134209,33117180,33072083,33119858,33043945,33145970,33111939,33068017,33114074,33136928,33054006,33145910,33115024,33138539,33146946,33128951,33142840,33146937,33094627,33144140,33077896,33124905,33132177,33103267,33130060,33086768,33109070,33142692,33137470,33110031,33134883,33069052,33025446,33101407,33093278,33140487,33128197,33085884,33119347,33138150,33145314,33034351,33131451,33081159,33104541,33142049)
    val str: String = "[33153063,33151774,33152472,33151402,33151658,33151959,33151239,33152539,33123895,33150642,33150086,33150260,33150272,33152887,33149938,33151474,33150362,33134058,33127602,33147270,33152072,33152069,33148986,33123884,33149504,33152973,33147680,33150567,33153152,33147079,33149754,33122934,33122419,33122242,33151312,33150179,33149213,33148697,33147193,33151805,33152394,33149706,33147009,33152958,33153178,33150276,33151967,33151830,33153359,33150862,33140973,33145411,33149803,33152788,33145470,33149796,33138836,33143016,33149857,33130578,33131166,33152929,33146686,33123142,33145095,33130611,33143489,33151838,33130701,33145136,33152686,33152085,33143828,33150084,33146693,33152046,33147071,33146454,33149651,33138278,33131630,33144556,33152338,33145791,33138894,33150930,33145498,33142751,33140795,33116558,33140527,33150186,33149786,33129908,33117726,33143995,33148732,33151518,33135389,33151003,33130221,33141517,33150112,33141335,33134113,33127423,33148935,33148215,33142560,33142866,33124365,33145898,33138050,33138884,33138933,33130536,33132951,33140298,33152422,33150351,33150320,33144206,33150286,33150285,33145246,33146002,33149684,33140235,33138570,33149916,33151083,33119801,33124631,33136554,33139827,33144510,33153122,33138302,33146820,33134737,33136351,33139062,33146484,33143546,33148198,33125963,33150052,33139320,33130954,33135695,33148411,33129575,33136329,33120136,33150419,33129432,33149929,33133369,33149143,33132850,33135237,33122705,33150281,33139837,33139297,33140853,33123620,33127345,33138242,33146316,33123559,33150136,33139148,33128972,33124986,33147372,33108050,33142087,33146789,33128941,33138625,33140927,33149996,33149970,33127810,33079427,33122122,33146017,33144544,33145372,33149905,33128495,33141439,33140237,33151975,33144400,33149083,33136935,33144417,33134059,33117631,33124526,33134947,33093897,33125322,33131195,33137302,33123295,33123697,33140581,33098704,33147386,33149686,33133477,33136193,33124191,33150986,33129026,33124521,33122656,33124991,33105138,33137417,33149709,33117813,33137708,33114107,33123406,33131480,33145229,33146265,33117656,33137196,33149736,33139506,33139446,33146224,33137721,33144464,33109633,33149601,33101401,33146006,33132107,33127419,33107108,33117192,33125383,33134142,33082128,33126223,33143447,33132820,33105773,33139064,33143504,33119656,33135896,33130641,33107017,33149155,33124505,33112915,33077473,33125176,33130632,33142549,33120969,33105706,33144910,33138219,33123514,33133231,33124554,33109243,33132718,33140045,33096580,33118584,33119870,33115719,33138349,33151260,33150197,33118994,33147771,33148796,33107756,33053537,33094449,33141078,33132061,33136495,33120534,33148730,33106822,33149629,33116245,33134995,33131840,33106921,33147918,33137759,33144258,33148632,33107065,33119317,33117923,33125164,33117939,33123972,33127463,33126447,33126676,33091698,33118471,33147241,33123807,33106723,33128523,33084205,33139983,33142213,33078719,33078798,33130533,33142776,33127285,33091715,33139936,33129355,33134021,33065142,33143442,33116310,33121628,33144527,33104550,33123916,33127646,33104618,33067962,33134952,33152314,33074289,33134463,33131720,33094342,33101487,33114284,33131367,33130863,33129007,33147309,33141274,33133057,33141452,33145738,33092239,33147228,33141020,33116762,33134839,33137793,33140400,33140879,33144039,33114403,33147127,33119486,33082719,33124034,33146364,33062606,33085441,33115647,33106677,33045372,33122729,33131519,33049627,33120000,33120491,33117650,33083550,33085532,33146905,33115332,33091903,33136422,33109513,33078648,33136665,33095031,33146806,33113569,33134908,33085410,33148984,33145525,33146253,33136799,33109625,33139894,33087525,33103303,33147518,33114869,33128332,33089535,33117681,33043883,33071119,33113557,33123736,33071712,33094829,33147390,33118924,33110973,33133140,33130986,33096899,33145504,33129685,33117766,33135793,33124917,33123756,33109694,33086322,33137624,33135539,33104750,33148202,33147258,33110478,33113138,33141508,33123948,33097663,33141378,33078012,33061058,33052483,33147159,33139315,33134663,33128824,33142761,33092974,33049809,33116940,33136692,33134209,33117180,33072083,33119858,33043945,33145970,33111939,33068017,33114074,33136928,33054006,33145910,33115024,33138539,33146946,33128951,33142840,33146937,33094627,33144140,33077896,33124905,33132177,33103267,33130060,33086768,33109070,33142692,33137470,33110031,33134883,33069052,33025446,33101407,33093278,33140487,33128197,33085884,33119347,33138150,33145314,33034351,33131451,33081159,33104541,33142049]"
    assert(ApiReader.toStories(str) sameElements  intArr)
  }
  test("toUpdates"){
    val str: String ="{\"items\":[33151294,33154303,33151596],\"profiles\":[\"planede\",\"skrap\"]}"
    val updatesObject: UpdatesObject = UpdatesObject(items = Array(33151294,33154303,33151596), profiles = Array("planede", "skrap"))
    assert(ApiReader.toUpdates(str).items sameElements   updatesObject.items)
    assert(ApiReader.toUpdates(str).profiles sameElements   updatesObject.profiles)
  }
}